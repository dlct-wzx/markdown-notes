## 编译原理

[TOC]

# 第一章 绪论

## 重点

1. 翻译、解释、编译的区别（简答）
2. 编译过程分为那些步骤

## 1.1 程序设计语言和编译程序

**计算机的指令系统**

- 计算机所能执行的**每一种操作**称为一条**指令**，计算机能够执行的全部指令集合就是该计算机的**指令系统**

- **指令格式：操作码 操作地址码**

**低级语言**

- **机器语言**：**二进制形式的指令序列**称为某计算机的**机器语言**，也是计算机**唯一能够直接识别并执行**的语言
  - 优点：直接执行，速度快，资源占用少 
  - 缺点：可读性、可移植性差，编程繁杂
- **汇编语言**：用**助记符**代替机器语言的二进制指令
  -  缺点： 严重依赖目标机器；不易开发、调试；和自然语言表达习惯相去甚远，可读性差。

**高级语言**

- 高级语言已经从具体机器中抽象出来，摆脱了依赖具体机器的问题
- 高级语言虽然更符合人类的思维习惯，但高级语言程序必须**翻译(编译)**成最终能够直接执行的机器语言程序

**程序设计语言的转换**

- **翻译**：是指将某种语言的源程序，在不改变语义(**逻辑上等价)**的 条件下，转换成另一种语言程序——目标语言程序 
- **编译**：专指由高级语言程序一次性转换成低级语言程序，**类似于全文翻译**
- **解释**：接受某高级语言的一个语句输入，进行解释并控制计算机执行，得到这个语句的执行结果后，等待下一个语句的解 释执行，执行过程中并不产生目标程序。**类似于口译**

**高级语言程序的执行类型**

- **编译型：一次性全部转换**
  - 优点：执行效率高
  - 缺点：依赖编译器，跨平台性差
  - C、C++、Pascal、Delphi
- **解释型：边运行，边转换**
  - 优点：跨平台性好
  - 缺点：执行效率低
  - BASIC、shell、HTML、Javascript
- **特殊型：**eg：Java：先编译成较低级的字节码程序，然后编译为机器语言程序



**高级程序语言执行的三阶段：编译阶段、汇编阶段和运行阶段**![image-20220905113409124](https://i0.hdslb.com/bfs/album/4aa64ffba0c3ab88a5e426c4537a06b4ea0362b5.png)

## 1.3 编译过程和编译程序结构

**高级语言程序的编译过程**

- 输入：**源程序**
- 输出：**目标程序**
- 五个阶段：
  - **词法分析**：将源程序中的字符串变换成单词符号流
  - **语法分析**：根据语法规则，从单词符号串中识别出各种语法单位（如表达式、说明、程序段等），并检查语法结构的正确性
  - **语义分析和中间代码生成**：对每种语法单位（范畴）进行静态语义审查 (验证语法结构合法的程序是否真正有意义) ；在语义检查正确的情况下进行中间代码的翻译
    - **中间代码**是一种介于高级语言语句和低级语言的指令之间的一种 **独立于具体硬件的记号系统**
  - **中间代码优化**：是对前阶段产生的中间代码进行**等价变换或改造**， 以期获得更为**高效**(节省时间和空间)的目标代码
  - **目标代码生成**：是把中间代码(或经优化处理之后)变换成**特定机器上的机器语言代码或汇编语言代码**，实现最终的翻译工作（**依赖硬件及其指令系统**）
  - ==编译程序结构示意图（重点内容）==![image-20220905114437543](https://i0.hdslb.com/bfs/album/675f0d8c1b9604d9f0342613e619b001e0f60214.png)

**表格管理和出错处理**

- **表格管理**
  - 编译程序过程中要记录变量名（存储分配、类型、作 用域等）
  - 如果是函数名（参数数量、类型，参数的传递方式、 返回值类型等）
  - 常量表、分程序入口表以及中间代码表等
  - 编译程序的各个阶段需要**构造、查找、更新变量和函数的信息**,**表格管理耗费了编译过程的绝大部分时间**
- **出错处理**
  - 完整的编译程序应该能够定位和跟踪错误
  - 能够捕获到各种词法、语法、语义错误，并定位错误 的类型及出错位置
  - 此外，为了尽可能多地发现错误，应在发现错误后还能继续编译下去，以便发现更多的错误

## 1.4 编译程序的开发

**编译程序的开发技术**

- **自编译**：已有编译程序，用某种高级语言编写更强的编译程序
- **交叉编译**：A机有编译程序，针对B机器，在A机上编写一个编译程序，使得B机器上的源代码可以被编译成目标程序
- **自展**：用机器语言或汇编语言实现源语言子集（L0）的编译器T0，接着不断自编译进行扩展… …直到源语言L/T
- **移植**：修改基于A机器的编译程序，使得能够在B机器上顺利执行

## 1.5 构造编译程序所应具备的知识内容
